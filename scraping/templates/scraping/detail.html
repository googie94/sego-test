{% extends 'blog/base.html' %}
{% load static %}
{% block content %}
<style type="text/css">
body, html {
	background-color: #41775D;
}
</style>
<br>
<div id="detail_app">
	<div class="card--container">
	    <ul class="card--wrapper">
			<div class="card--profile" style="align-items: center;">
				<!-- <img src="{% static '/img/naver.svg' %}" style="width: 42px;"></img> -->
				<img src="{% static '/img/naver.svg' %}" 
					 style="width: 42px;"
					 v-if="post.category == 'cafe' || post.category == 'blog'"></img>
				<img src="{% static '/img/insta.svg' %}" 
					 style="width: 42px;"
					 v-if="post.category == 'instagram'"></img>
				<a class="comment-btn radius10 ft12" :href="post.url" style="padding: 4px 10px;">글 보러가기</a>
			</div>
			<div class="carousel--container">
				<ul class="carousel--wrapper" style="text-align: -webkit-center; margin-bottom: 40px;">
					<li v-for="pic in post.pictures" v-if="post.pictures" style="margin: 0 auto;">
						<div class="carousel--img">
							<img :src="pic.url" class="carousel--img_m">
							<img :src="pic.url" class="carousel--img_pc">
						</div>
					</li>
				</ul>
			</div>
			<div class="feed-wrapper" v-if="post.category == 'instagram'">
				<iframe :src="'https://www.instagram.com/p/'+post.post_id+'/embed'" frameborder="0" scrolling="no" allowtransparency="true"></iframe>
			</div>
			<strong class="card--title" v-if="post.title">[[ post.title ]]</strong><br>
			<div style="padding: 10px 0px;">
				<span v-for="tag in post.tags" v-if="post.tags" style="padding: 4px 6px; margin-left: 5px; font-size: 12px; background-color: #EEE; border-radius: 3px; align-self: center; word-break: keep-all;"><strong>[[ tag.tag ]]</strong></span>
			</div>
			<pre class="card--content" style="font-size: 16px; line-height: 1.5em;">[[ post.content ]]</pre>
			<p class="card--date">[[ moment(post.created_date).format('Y년 M월 D일 HH:mm') ]]</p>
		</ul>
	</div>
</div>

<script type="text/javascript" src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/jquery.slick/1.4.1/slick.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.0/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.0/locale/ko.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script type="text/javascript">
	var post_id = '{{ post_id }}'
	var type = '{{ is_type }}'
	var detailApp = new Vue({
		delimiters: ['[[',']]'],
		el: '#detail_app',
		data: {
			post: []
		},
		created() {
			this.getPost()
		},
		methods: {
			getPost() {
				var v = this
				var url = ''
				if (type == 'instagram') {
					url = '/api/v1/post-instagram/'+post_id+'/'	
				} else {
					url = '/api/v1/post-naver/'+post_id+'/'
				}
				axios.get(url)
				.then(function(res){
					v.post = res.data
					setTimeout(function() { v.slick() }, 1000)
				})
				.catch(function(err){})
			},

			slick() {
				$(document).ready(function(){
					$('.carousel--wrapper').slick({
                        dots: false,
                        infinite: true,
                        autoplay: true,
                        autoplaySpeed: 2000,
                        arrows: false,
                    });
				});
			}

		},
	})
</script>


{% include "blog/footer.html" %}
{% endblock %}