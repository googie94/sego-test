{% extends 'blog/base.html' %}
{% load static %}
{% block content %}
<style type="text/css">
body, html {
	background-color: #41775D;
}
</style>

<div id="app" class="main-feeds" style="max-width: 820px; margin: 0 auto;">
	<!-- <div style="text-align: center;">
		<iframe src="https://www.instagram.com/p/CPktXxIF3Ea/embed" width="400" height="450" frameborder="0" scrolling="no" allowtransparency="true"></iframe>
	</div> -->
	<br>
	<div style="padding: 20px;">
		<p class="feeds">Feeds</p>
	</div>
	<div class="card--container"
		 v-for="post in post_list"
		 style="box-shadow: 2px 2px 20px #000000; border-radius: 20px; margin-bottom: 40px;">
		<a :href="'/scraping/'+post.id+'/'">
			<ul class="card--wrapper">
				<strong class="card--title" v-if="post.title">[[ post.title ]]</strong>
				<pre class="card--content" style="font-size: 16px; line-height: 1.5em; overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 4; -webkit-box-orient: vertical; height: 6.6em;">[[ post.content ]]</pre>
				<!-- <span style="font-size: 10px;">[[ post.comments.length ]] 개 댓글이 있습니다</span> -->
				<p class="card--date">[[ post.created_date ]]</p>
			</ul>
		</a>
	</div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.0/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.0/locale/ko.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script type="text/javascript">
	var app = new Vue({
		delimiters: ['[[',']]'],
		el: '#app',
		data: {
			post_list: []
		},
		created() {
			this.getPost()
		},
		methods: {
			getPost() {
				var v = this
				axios.get('/api/v1/post-naver/')
				.then(function(res){
					console.log(res.data)
					v.post_list = res.data.results
				})
				.catch(function(err){})
			}
		},
	})
</script>

{% include "blog/footer.html" %}
{% endblock %}
