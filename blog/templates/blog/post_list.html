{% extends 'blog/base.html' %}
{% load static %}
{% block content %}


<div id="postApp" class="bt50" v-cloak>
	<div>
		<br>
		<div style="padding: 20px;">
			<p style="font-family:'Lato', sans-serif; font-size: 24px;">Feeds</p>
		</div>
		{% if user.is_authenticated %}
			<a href="{% url 'post_new' %}" style="padding: 20px;"><span>포스트 작성</span></a>
		{% endif %}	
	</div>
	
	<div v-for="post in posts"
		 class="card--container">
		<a :href="'/post/'+post.id+'/'">
			<div class="card--profile">
				<img src="{% static '/img/ic_fair_limit_2w.svg' %}"></img>
				<p>맥국</p>
			</div>
			<ul class="card--wrapper">
				<li class="card--title">[[ post.title ]]</li>
				<pre class="card--content">[[ post.text ]]</pre>
			</ul>
		</a>
	</div>
</div>

<!-- <div>
	<div>
		{% for post in posts %}
		    	<div>
		    		<div>
		    			<h2><a href="{% url 'post_detail' pk=post.pk %}">{{ post.title }}</a></h2>
		    		</div>
		        	<pre>{{ post.text|linebreaksbr }}</pre>
		    	</div>
		{% endfor %}
	</div>
<div> -->

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script type="text/javascript">

var post_app = new Vue({
	delimiters: ['[[',']]'],
	el: '#postApp',
	data: {
		posts: [],
	},
	created() {
		this.getPost()
	},
	methods: {

		getPost() {
			var v=this;
			axios.get('/api/v1/blog/')
			.then(function(res){
				v.posts=res.data
			})
			.catch(function(err){})
		}
	}
})

</script>

{% endblock %}